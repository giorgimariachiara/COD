<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>MyPortfolio Bootstrap Template - Contact</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=https://fonts.googleapis.com/css?family=Inconsolata:400,500,600,700|Raleway:400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: MyPortfolio
  * Updated: May 30 2023 with Bootstrap v5.3.0
  * Template URL: https://bootstrapmade.com/myportfolio-bootstrap-portfolio-website-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <div class="container">
    <div class="headp">
      <div class="row align-items-center">
        <div class="col-12 camerasvg" data-aos="fade-up">
         <header>Chamber of deputies</header>
        </div> 
        </div>
      </div>
      </div>
  
    
      <nav class="navbar">
        <ul class="navbar-nav">
          <li class="nav-item"><a href="index.html" class="nav-link">Front page</a></li>
          <li class="nav-item"><a href="p1.html" class="nav-link">I</a></li>
          <li class="nav-item"><a href="p2.html" class="nav-link">II</a></li>
          <li class="nav-item"><a href="p3.html" class="nav-link">III</a></li>
          <li class="nav-item"><a href="p4.html" class="nav-link">IV</a></li>
          <li class="nav-item"><a href="p5.html" class="nav-link">V</a></li>
          <li class="nav-item"><a href="p6.html" class="nav-link">VI</a></li>
          <li class="nav-item"><a href="p7.html" class="nav-link">VII</a></li>
          <li class="nav-item"><a href="p8.html" class="nav-link">VIII</a></li>
          <li class="nav-item"><a href="p9.html" class="nav-link">IX</a></li>
          <li class="nav-item"><a href="p10.html" class="nav-link">X</a></li>
  
  
        </ul>
      </nav>
    
    <div class="page">
      <div class="row">
        <div class="col-4 article2">
          <div class="titleart"><h7 class="titleart">Titolo articolo</h7></div>
            <img src="./assets/img/chigi.jpeg"   alt="Descrizione dell'immagine" >
            <figcaption>Didascalia dell'immagine</figcaption>
            <p>It’s hypothesis-driven analysis. 
              The designer has a question to 
              answer, and a hypothesis and wants 
              to demonstrate. The validation 
              consists of the visual evidence 
              of a trend, a behaviour, or a
               relationship. Outcomes of data 
               analysis/discovery techniques 
               fall into two categories: 
               expected/unexpected; 
               positive/negative. Unexpected 
               negative results are the most 
               insightful patterns to support 
               decision-making.
               It’s hypothesis-driven analysis. 
               The designer has a question to 
               answer, and a hypothesis and wants 
               to demonstrate. The validation 
               consists of the visual evidence 
               of a trend, a behaviour, or a
                relationship. Outcomes of data 
                analysis/discovery techniques 
                fall into two categories: 
                expected/unexpected; 
                positive/negative. Unexpected 
                negative results are the most 
                insightful patterns to support 
                decision-making.</p>
      </div>
      <div class="col-8 chart" data-aos="fade-up">
        <label for="genderFilter">Filtro per Genere:</label>
        <select id="genderFilter">
          <option value="uomini">Uomini</option>
          <option value="donne">Donne</option>
        </select>
        <div id="map"></div>
        


      </div>
      
    
      </div>
    </div>
  
  





  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

 <!-- mappa uomini -->
 <script src="https://d3js.org/d3.v7.min.js"></script>
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  
<script>
  var dati = [
  { regione: 'Campania', count: 544 },
    { regione: 'Piemonte', count: 352 },
    { regione: 'Emilia-Romagna', count: 346 },
    { regione: 'Veneto', count: 388 },
    { regione: 'Abruzzo', count: 135 },
    { regione: 'Puglia', count: 369 },
    { regione: 'Lombardia', count: 657 },
    { regione: 'Sicilia', count: 495 },
    { regione: 'Liguria', count: 135 },
    { regione: 'Toscana', count: 328 },
    { regione: 'Calabria', count: 224 },
    { regione: 'Lazio', count: 438 },
    { regione: 'Trentino-Alto Adige/Südtirol', count: 76 },
    { regione: 'Friuli-Venezia Giulia', count: 113 },
    { regione: 'Basilicata', count: 79 },
    { regione: 'Umbria', count: 73 },
    { regione: 'Marche', count: 141 },
    { regione: 'Sardegna', count: 160 },
    { regione: 'Molise', count: 40 },
    { regione: "Valle d'Aosta/Vallée d'Aoste", count: 14 }
  ];

  var datiDonne = [
  { regione: 'Lombardia', count: 62 },
    { regione: 'Puglia', count: 12 },
    { regione: "Trentino-Alto Adige/Südtirol", count: 8 },
    { regione: 'Piemonte', count: 29 },
    { regione: 'Lazio', count: 91 },
    { regione: "Friuli-Venezia Giulia", count: 23 },
    { regione: 'Liguria', count: 24 },
    { regione: 'Toscana', count: 65 },
    { regione: 'Campania', count: 47 },
    { regione: 'Veneto', count: 39 },
    { regione: 'Marche', count: 20 },
    { regione: 'Emilia-Romagna', count: 41 },
    { regione: 'Sicilia', count: 35 },
    { regione: 'Abruzzo', count: 7 },
    { regione: 'Umbria', count: 5 },
    { regione: 'Calabria', count: 14 },
    { regione: 'Sardegna', count: 14 },
    { regione: "Valle d'Aosta/Vallée d'Aoste", count: 1 },
    { regione: 'Basilicata', count: 3 },
    { regione: 'Molise', count: 2 }
  ];


    // Definisci la scala di colori per gli uomini (Blu)
    var colorScaleUomini = d3.scaleSequential(d3.interpolateBlues)
      .domain([0, d3.max(dati, function(d) { return d.count; })]);

    // Definisci la scala di colori per le donne (Rosa)
    var colorScaleDonne = d3.scaleSequential(d3.interpolateRdPu)
      .domain([0, d3.max(datiDonne, function(d) { return d.count; })]);

    // Carica i dati GeoJSON delle regioni
    Promise.all([
      d3.json('regioni.geojson'),
      new Promise(function(resolve) {
        if (document.readyState === 'complete') {
          resolve();
        } else {
          window.addEventListener('load', resolve);
        }
      })
    ]).then(function(results) {
      var geojson = results[0];

      // Crea una mappa Leaflet
      var map = L.map('map', { 
        center: [43, 12], 
        zoom: 6, 
        zoomControl: false,
      });

      // Aggiungi il layer dei poligoni
      function updateMap(data) {
        // Rimuovi tutti i poligoni dalla mappa
        map.eachLayer(function(layer) {
          if (layer instanceof L.GeoJSON) {
            map.removeLayer(layer);
          }
        });

        // Aggiungi i poligoni con lo stile e i popup aggiornati
        L.geoJSON(geojson, {
          style: function(feature) {
            var nomeRegione = feature.properties.reg_name;
            var count = data.find(function(d) {
              return d.regione === nomeRegione;
            }).count;

            var fillColor;
            if (data === dati) {
              fillColor = colorScaleUomini(count);
            } else {
              fillColor = colorScaleDonne(count);
            }

            return {
              fillColor: fillColor,
              weight: 1,
              opacity: 1,
              color: 'white',
              fillOpacity: 0.7
            };
          },
          onEachFeature: function(feature, layer) {
            var nomeRegione = feature.properties.reg_name;
            var count = data.find(function(d) {
              return d.regione === nomeRegione;
            }).count;

            layer.bindPopup("<b>" + nomeRegione + "</b><br>Count: " + count);
          }
        }).addTo(map);
      }

      // Inizializza la mappa con i dati degli uomini
      updateMap(dati);

      // Ottenere il riferimento all'elemento di input del filtro di genere
      var genderFilter = document.getElementById('genderFilter');

      // Aggiungere un gestore di eventi per l'evento di cambio
      genderFilter.addEventListener('change', function() {
        // Ottenere il valore selezionato
        var selectedGender = genderFilter.value;

        // In base al valore selezionato, mostra i dati corrispondenti
        if (selectedGender === 'uomini') {
          updateMap(dati);
        } else if (selectedGender === 'donne') {
          updateMap(datiDonne);
        }
      });
    });
</script>
</body>

</html>
